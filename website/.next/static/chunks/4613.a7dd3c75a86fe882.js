"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4613,313],{7049:function(e,t,r){var n=r(7462),i=r(4942),a=r(7294),c=r(4184),s=r.n(c),o=r(9844),l=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};t.Z=function(e){var t,r=a.useContext(o.E_),c=r.getPrefixCls,d=r.direction,u=e.prefixCls,p=e.type,f=void 0===p?"horizontal":p,g=e.orientation,h=void 0===g?"center":g,m=e.orientationMargin,x=e.className,v=e.children,_=e.dashed,b=e.plain,j=l(e,["prefixCls","type","orientation","orientationMargin","className","children","dashed","plain"]),y=c("divider",u),N=h.length>0?"-".concat(h):h,w=!!v,S="left"===h&&null!=m,P="right"===h&&null!=m,k=s()(y,"".concat(y,"-").concat(f),(t={},(0,i.Z)(t,"".concat(y,"-with-text"),w),(0,i.Z)(t,"".concat(y,"-with-text").concat(N),w),(0,i.Z)(t,"".concat(y,"-dashed"),!!_),(0,i.Z)(t,"".concat(y,"-plain"),!!b),(0,i.Z)(t,"".concat(y,"-rtl"),"rtl"===d),(0,i.Z)(t,"".concat(y,"-no-default-orientation-margin-left"),S),(0,i.Z)(t,"".concat(y,"-no-default-orientation-margin-right"),P),t),x),Z=(0,n.Z)((0,n.Z)({},S&&{marginLeft:m}),P&&{marginRight:m});return a.createElement("div",(0,n.Z)({className:k},j,{role:"separator"}),v&&a.createElement("span",{className:"".concat(y,"-inner-text"),style:Z},v))}},4613:function(e,t,r){r.r(t);var n=r(4051),i=r.n(n),a=r(5893),c=r(9669),s=r.n(c),o=r(7294),l=r(7049),d=r(313),u=r(5617),p=r(1674),f=r(1541);function g(e,t,r,n,i,a,c){try{var s=e[a](c),o=s.value}catch(l){return void r(l)}s.done?t(o):Promise.resolve(o).then(n,i)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function c(e){g(a,n,i,c,s,"next",e)}function s(e){g(a,n,i,c,s,"throw",e)}c(void 0)}))}}t.default=function(){var e=(0,u.v9)((function(e){return e.basket})).basket,t=(0,o.useState)({}),r=t[0],n=t[1],c=(0,o.useState)({}),g=c[0],m=c[1],x=(0,o.useState)({cargo_price_discount:0,cargo_price:0,selectedCargo:0}),v=x[0],_=x[1],b=(0,o.useState)({total:0,discount:0,cargo_price:0,cargo_price_discount:0}),j=b[0],y=b[1],N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=0,n=0,i=[];t.map((function(t){var a=e.find((function(e){return e._id==t.product_id}));if(a){var c=a;if(void 0!==t.selectedVariants){var s=f.Z.filter_array_in_obj(c.variant_products,t.selectedVariants);!1===s[0].visible?i.push("Product Not Active"):Number(s[0].qty)<Number(t.qty)?i.push("Product Not in Stock"):i.push(null),r+=t.qty*s[0].price,n+=t.qty*s[0].before_price}else!1===c.isActive?i.push("Product Not Active"):Number(c.qty)<Number(t.qty)?i.push("Product Not in Stock"):i.push(null),r+=t.qty*c.price,n+=t.qty*c.before_price}})),y({total:r,discount:n,error:i})},w=function(){var t=h(i().mark((function t(){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.length>0)){t.next=7;break}return r=[],e[0].products.map((function(e){r.push(e.product_id)})),t.next=5,s().post("".concat(p.API_URL,"/basket/allproducts"),{_id:r}).then((function(t){N(t.data,e[0].products)}));case 5:n(e[0].billing_address),m(e[0].shipping_address);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),S=function(){var t=h(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s().get("".concat(p.API_URL,"/cargoespublic")).then((function(t){e.length>0&&(e[0].cargoes_id?_({cargo_price:e[0].cargo_price,cargo_price_discount:e[0].cargo_price_discount,selectedCargo:e[0].cargoes_id}):_({cargo_price:t.data[0].price,cargo_price_discount:t.data[0].before_price,selectedCargo:t.data[0]._id}))}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,o.useEffect)((function(){S(),w()}),[e[0]]),(0,a.jsxs)("div",{className:"h-full relative",children:[(0,a.jsx)("div",{className:"text-lg p-3 -mt-2 bg-gray-50 font-semibold",children:"Shipping Address Summary"}),(0,a.jsx)("div",{className:"w-full p-4",children:g?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("b",{children:[g.name," "]}),(0,a.jsx)("br",{}),(0,a.jsxs)("div",{className:"flex w-full justify-between pt-1 ",children:[g.address,(0,a.jsx)("br",{}),g.village_id,"/",g.town_id,"/",g.city_id,"/",g.country_id]})]}):(0,a.jsx)("div",{className:"text-red-500 text-center font-semibold p-4",children:"Please Select Address"})}),(0,a.jsx)("div",{className:"text-lg p-3 bg-gray-50 font-semibold",children:"Billing Address Summary"}),(0,a.jsx)("div",{className:"w-full p-4 ",children:r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("b",{children:[r.name," "]}),(0,a.jsx)("br",{}),(0,a.jsxs)("div",{className:"flex w-full justify-between pt-1 ",children:[r.address,(0,a.jsx)("br",{}),r.village_id,"/",r.town_id,"/",r.city_id,"/",r.country_id]})]}):(0,a.jsx)("div",{className:"text-red-500 text-center font-semibold p-4",children:"Please Select Address"})}),(0,a.jsx)("div",{className:"text-lg p-3 bg-gray-50 font-semibold",children:"Cargo Summary"}),(0,a.jsxs)("div",{className:"w-full px-4 ",children:[v.cargo_price_discount>0?(0,a.jsxs)("div",{className:"w-full mt-3 ",children:[(0,a.jsx)("span",{children:"Cargo Discount:"}),(0,a.jsx)("span",{className:"float-right font-semibold line-through",children:(0,a.jsx)(d.default,{data:v.cargo_price_discount})})]}):"",(0,a.jsxs)("div",{className:"w-full mt-3 ",children:[(0,a.jsx)("span",{children:"Cargo Price:"}),(0,a.jsx)("span",{className:"float-right font-semibold",children:(0,a.jsx)(d.default,{data:v.cargo_price})})]})]}),(0,a.jsx)("div",{className:"text-lg p-3 my-5 bg-gray-50 font-semibold",children:"Basket Summary"}),j.discount+v.cargo_price_discount>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"w-full px-4 mt-1",children:[(0,a.jsx)("span",{children:"Total Discount:"}),(0,a.jsx)("span",{className:"float-right line-through font-semibold",children:(0,a.jsx)(d.default,{data:j.discount+v.cargo_price_discount})})]}),(0,a.jsx)(l.Z,{})]}):"",(0,a.jsxs)("div",{className:"w-full px-4 text-lg mb-6",children:[(0,a.jsx)("span",{children:"Total Price:"}),(0,a.jsx)("span",{className:"float-right font-semibold text-brand-color",children:(0,a.jsx)(d.default,{data:j.total+v.cargo_price})})]})]})}},313:function(e,t,r){r.r(t);var n=r(5893),i=r(5617);t.default=function(e){var t=e.data,r=void 0===t?0:t,a=(0,i.v9)((function(e){return e.settings})).settings;return(0,n.jsx)(n.Fragment,{children:a.price_type?(0,n.jsxs)(n.Fragment,{children:[a.price_icon,r.toLocaleString(void 0,{minimumFractionDigits:2})]}):(0,n.jsxs)(n.Fragment,{children:[r.toLocaleString(void 0,{minimumFractionDigits:2}),a.price_icon]})})}}}]);