(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[569],{6159:function(e,n,s){"use strict";s.d(n,{Tm:function(){return a},l$:function(){return t}});var r=s(7294),t=r.isValidElement;function a(e,n){return function(e,n,s){return t(e)?r.cloneElement(e,"function"===typeof s?s(e.props||{}):s):n}(e,e,n)}},4872:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/resetpassword",function(){return s(6091)}])},6091:function(e,n,s){"use strict";s.r(n);var r=s(4051),t=s.n(r),a=s(5893),o=s(7294),i=s(6536),u=s(3798),c=s(2688),d=s(1577),l=s(1674),p=s(1163),f=s(9669),m=s.n(f),h=s(5152);function w(e,n,s,r,t,a,o){try{var i=e[a](o),u=i.value}catch(c){return void s(c)}i.done?n(u):Promise.resolve(u).then(r,t)}var v=s.n(h)()((function(){return s.e(2076).then(s.bind(s,2076))}),{loadableGenerated:{webpack:function(){return[2076]}}});n.default=function(){var e=(0,p.useRouter)(),n=e.query.token,s=(0,o.useState)(""),r=s[0],f=s[1],h=function(){var n,s=(n=t().mark((function n(s){return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m().get(l.API_URL+"/users/reset?resetPasswordToken="+s).then((function(e){"password reset link a-ok"==e.data.message&&f(e.data.username)})).catch((function(n){i.ZP.error("password reset link is invalid or has expired "+n),e.push("/forgotpassword")}));case 2:case"end":return n.stop()}}),n)})),function(){var e=this,s=arguments;return new Promise((function(r,t){var a=n.apply(e,s);function o(e){w(a,r,t,o,i,"next",e)}function i(e){w(a,r,t,o,i,"throw",e)}o(void 0)}))});return function(e){return s.apply(this,arguments)}}();(0,o.useEffect)((function(){h(n)}),[]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:" container-custom text-center items-center py-14",children:[r?(0,a.jsxs)(u.Z,{initialValues:{remember:!0},onFinish:function(s){m().put("".concat(l.API_URL,"/users/updatePasswordViaEmail"),{username:r,password:s.password,resetPasswordToken:n}).then((function(n){"password reset link is invalid or has expired"==n.data.message?i.ZP.error("password reset link is invalid or has expired"):"no user exists in db to update"==n.data.message?i.ZP.error("no user exists in db to update"):(i.ZP.success("Password Updated"),e.push("/signin"))})).catch((function(e){return console.log(e)}))},layout:"vertical",className:"w-6/12 mx-auto",children:[(0,a.jsx)(u.Z.Item,{name:"password",label:"Password",rules:[{message:"Please input your password!"}],hasFeedback:!0,children:(0,a.jsx)(c.Z.Password,{})}),(0,a.jsx)(u.Z.Item,{name:"confirm",label:"Confirm Password",dependencies:["password"],hasFeedback:!0,rules:[{message:"Please confirm your password!"},function(e){var n=e.getFieldValue;return{validator:function(e,s){return s&&n("password")!==s?Promise.reject("The two passwords that you entered do not match!"):Promise.resolve()}}}],children:(0,a.jsx)(c.Z.Password,{})}),(0,a.jsx)(u.Z.Item,{children:(0,a.jsx)(d.Z,{type:"primary",className:"mb-0 w-full",size:"large",htmlType:"submit",children:"Update Password"})})]}):"",(0,a.jsx)(d.Z,{type:"link",onClick:function(){return e.push("/signin")},children:(0,a.jsx)(v,{id:"app.userAuth.signIn"})})]})})}}},function(e){e.O(0,[1577,2688,3798,9774,2888,179],(function(){return n=4872,e(e.s=n);var n}));var n=e.O();_N_E=n}]);