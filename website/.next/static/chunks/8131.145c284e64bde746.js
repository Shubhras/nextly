"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8131,313],{801:function(t,e,r){r.d(e,{Z:function(){return s}});var n=r(1413),c=r(7294),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M433.1 657.7a31.8 31.8 0 0051.7 0l210.6-292c3.8-5.3 0-12.7-6.5-12.7H642c-10.2 0-19.9 4.9-25.9 13.3L459 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H315c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"check-square",theme:"outlined"},i=r(2135),o=function(t,e){return c.createElement(i.Z,(0,n.Z)((0,n.Z)({},t),{},{ref:e,icon:a}))};o.displayName="CheckSquareOutlined";var s=c.forwardRef(o)},6159:function(t,e,r){r.d(e,{Tm:function(){return a},l$:function(){return c}});var n=r(7294),c=n.isValidElement;function a(t,e){return function(t,e,r){return c(t)?n.cloneElement(t,"function"===typeof r?r(t.props||{}):r):e}(t,t,e)}},7049:function(t,e,r){var n=r(7462),c=r(4942),a=r(7294),i=r(4184),o=r.n(i),s=r(9844),l=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var c=0;for(n=Object.getOwnPropertySymbols(t);c<n.length;c++)e.indexOf(n[c])<0&&Object.prototype.propertyIsEnumerable.call(t,n[c])&&(r[n[c]]=t[n[c]])}return r};e.Z=function(t){var e,r=a.useContext(s.E_),i=r.getPrefixCls,u=r.direction,d=t.prefixCls,p=t.type,f=void 0===p?"horizontal":p,h=t.orientation,g=void 0===h?"center":h,m=t.orientationMargin,_=t.className,v=t.children,x=t.dashed,b=t.plain,y=l(t,["prefixCls","type","orientation","orientationMargin","className","children","dashed","plain"]),j=i("divider",d),N=g.length>0?"-".concat(g):g,w=!!v,Z="left"===g&&null!=m,k="right"===g&&null!=m,C=o()(j,"".concat(j,"-").concat(f),(e={},(0,c.Z)(e,"".concat(j,"-with-text"),w),(0,c.Z)(e,"".concat(j,"-with-text").concat(N),w),(0,c.Z)(e,"".concat(j,"-dashed"),!!x),(0,c.Z)(e,"".concat(j,"-plain"),!!b),(0,c.Z)(e,"".concat(j,"-rtl"),"rtl"===u),(0,c.Z)(e,"".concat(j,"-no-default-orientation-margin-left"),Z),(0,c.Z)(e,"".concat(j,"-no-default-orientation-margin-right"),k),e),_),P=(0,n.Z)((0,n.Z)({},Z&&{marginLeft:m}),k&&{marginRight:m});return a.createElement("div",(0,n.Z)({className:C},y,{role:"separator"}),v&&a.createElement("span",{className:"".concat(j,"-inner-text"),style:P},v))}},1322:function(t,e,r){r.r(e);var n=r(4051),c=r.n(n),a=r(5893),i=r(9669),o=r.n(i),s=r(7294),l=r(1163),u=r.n(l),d=r(6536),p=r(1577),f=r(1369),h=r(7049),g=r(313),m=r(801),_=r(5617),v=r(1674),x=r(1541),b=r(4840);function y(t,e,r,n,c,a,i){try{var o=t[a](i),s=o.value}catch(l){return void r(l)}o.done?e(s):Promise.resolve(s).then(n,c)}function j(t){return function(){var e=this,r=arguments;return new Promise((function(n,c){var a=t.apply(e,r);function i(t){y(a,n,c,i,o,"next",t)}function o(t){y(a,n,c,i,o,"throw",t)}i(void 0)}))}}e.default=function(){var t,e,r=(0,_.v9)((function(t){return t.basket})).basket,n=(0,_.v9)((function(t){return t.login})),i=n.isAuthenticated,l=n.user,y=(0,s.useState)([]),N=y[0],w=y[1],Z=(0,s.useState)({cargo_price_discount:0,cargo_price:0,selectedCargo:0}),k=Z[0],C=Z[1],P=(0,s.useState)({total:0,discount:0,cargo_price:0,cargo_price_discount:0}),q=P[0],S=P[1],E=(0,_.I0)(),A=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=0,n=0,c=[];e.map((function(e){var a=t.find((function(t){return t._id==e.product_id}));if(a){var i=a;if(void 0!==e.selectedVariants){var o=x.Z.filter_array_in_obj(i.variant_products,e.selectedVariants);!1===o[0].visible||Number(o[0].qty)<Number(e.qty)?c.push(!0):c.push(!1),r+=e.qty*o[0].price,n+=e.qty*o[0].before_price}else!1===i.isActive||Number(i.qty)<Number(e.qty)?c.push(!0):c.push(!1),r+=e.qty*i.price,n+=e.qty*i.before_price}})),S({total:r,discount:n,error:c})},O=function(){var t=j(c().mark((function t(){var e;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.length>0)){t.next=5;break}return e=[],r[0].products.map((function(t){e.push(t.product_id)})),t.next=5,o().post("".concat(v.API_URL,"/basket/allproducts"),{_id:e}).then((function(t){A(t.data,r[0].products)}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),L=function(){var t=j(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o().get("".concat(v.API_URL,"/cargoespublic")).then((function(t){w(t.data),r.length>0&&(r[0].cargoes_id?C({cargo_price:r[0].cargo_price,cargo_price_discount:r[0].cargo_price_discount,selectedCargo:r[0].cargoes_id}):C({cargo_price:t.data[0].price,cargo_price_discount:t.data[0].before_price,selectedCargo:t.data[0]._id}))}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),I=function(){var t=j(c().mark((function t(){var e,n,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],n=[],r[0].products.map((function(t){n.push(t.product_id)})),t.next=5,o().post("".concat(v.API_URL,"/basket/allproducts"),{_id:n}).then((function(t){var n=t.data,c=r[0].products;c.map((function(t){var r=n.find((function(e){return e._id==t.product_id}));if(r){var c=r;if(void 0!==t.selectedVariants){var a=x.Z.filter_array_in_obj(c.variant_products,t.selectedVariants);!1===a[0].visible||Number(a[0].qty)<Number(t.qty)?e.push(!0):e.push(!1),t.qty*a[0].price,t.qty*a[0].before_price}else!1===c.isActive||Number(c.qty)<Number(t.qty)?e.push(!0):e.push(!1),t.qty*c.price,t.qty*c.before_price}}))}));case 5:!1,void 0===e.find((function(t){return 1==t}))?(a={created_user:{name:l.name,id:l.id},customer_id:l.id,products:r[0].products,cargoes_id:k.selectedCargo,total_price:q.total,total_discount:q.discount,cargo_price:k.cargo_price,cargo_price_discount:k.cargo_price_discount},i?o().post("".concat(v.API_URL,"/basket/").concat(r[0]._id),a).then(j(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d.ZP.success({content:"Next Stage :)",duration:3}),t.next=3,E((0,b.XJ)(l.id));case 3:case"end":return t.stop()}}),t)})))).catch((function(t){d.ZP.error({content:"Some Error, Please Try Again",duration:3}),console.log(t)})):(d.ZP.success({content:"Next Stage :)",duration:3}),E((0,b.j7)([a])),O()),u().push("/basket/address")):(E((0,b.XJ)(l.id)),d.ZP.loading("Action in progress..",.5).then((function(){return d.ZP.error("Please Control Your Basket",2.5)})));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,s.useEffect)((function(){L(),O()}),[r[0]]),(0,a.jsxs)("div",{className:"h-full relative",children:[(0,a.jsx)("div",{className:"h-20",children:(0,a.jsxs)(p.Z,{disabled:!((null===(t=r[0])||void 0===t?void 0:t.products.length)>0),className:"bg-black w-full h-auto absolute top-0 cursor-pointer hover:text-white hover:bg-brand-color transition-all text-xl text-white p-5",onClick:I,children:["Confirm Basket",(0,a.jsx)(m.Z,{className:"float-right text-3xl"})]})}),(0,a.jsx)("div",{className:"text-lg p-3 bg-gray-50 font-semibold",children:"Cargo Summary"}),(0,a.jsxs)("div",{className:"w-full px-4 ",children:[(0,a.jsxs)("div",{className:"w-full float-left mb-2 flex",children:[(0,a.jsx)("div",{className:"w-full my-1",children:"Cargo Company:"}),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(f.Z,{className:"float-right w-full -mr-4",value:k.selectedCargo,bordered:!1,onChange:function(t){return function(t){var e=N.find((function(e){return e._id==t})),n={created_user:{name:l.name,id:l.id},customer_id:l.id,products:r[0].products,total_price:q.total,cargo_price:e.price,cargo_price_discount:e.before_price,cargoes_id:t,total_discount:q.discount};i?o().post("".concat(v.API_URL,"/basket/").concat(r[0]._id),n).then(j(c().mark((function r(){return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return d.ZP.success({content:"Cargo Update!",duration:3}),r.next=3,E((0,b.XJ)(l.id));case 3:C({cargo_price:e.price,cargo_price_discount:e.before_price,selectedCargo:t});case 4:case"end":return r.stop()}}),r)})))).catch((function(t){d.ZP.error({content:"Some Error, Please Try Again",duration:3}),console.log(t)})):(d.ZP.success({content:"Cargo Update!",duration:3}),E((0,b.j7)([n])),C({cargo_price:e.price,cargo_price_discount:e.before_price,selectedCargo:t}),O())}(t)},children:N.map((function(t){return(0,a.jsx)(f.Z.Option,{value:t._id,children:t.title},t.title)}))})})]}),k.cargo_price_discount>0?(0,a.jsxs)("div",{className:"w-full mt-3 ",children:[(0,a.jsx)("span",{children:"Cargo Discount:"}),(0,a.jsx)("span",{className:"float-right font-semibold line-through",children:(0,a.jsx)(g.default,{data:k.cargo_price_discount})})]}):"",(0,a.jsxs)("div",{className:"w-full mt-3 ",children:[(0,a.jsx)("span",{children:"Cargo Price:"}),(0,a.jsx)("span",{className:"float-right font-semibold",children:(0,a.jsx)(g.default,{data:k.cargo_price})})]})]}),(0,a.jsx)("div",{className:"text-lg p-3 my-5 bg-gray-50 font-semibold",children:"Basket Summary"}),q.discount+k.cargo_price_discount>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"w-full px-4 mt-1",children:[(0,a.jsx)("span",{children:"Total Discount:"}),(0,a.jsx)("span",{className:"float-right line-through font-semibold",children:(0,a.jsx)(g.default,{data:q.discount+k.cargo_price_discount})})]}),(0,a.jsx)(h.Z,{})]}):"",(0,a.jsxs)("div",{className:"w-full px-4 text-lg mb-6",children:[(0,a.jsx)("span",{children:"Total Price:"}),(0,a.jsx)("span",{className:"float-right font-semibold text-brand-color",children:(0,a.jsx)(g.default,{data:q.total+k.cargo_price})})]}),(0,a.jsx)("div",{className:"h-24",children:(0,a.jsxs)(p.Z,{disabled:!((null===(e=r[0])||void 0===e?void 0:e.products.length)>0),className:"bg-black w-full h-auto absolute bottom-0 cursor-pointer hover:text-white hover:bg-brand-color transition-all text-xl text-white p-5",onClick:I,children:["Confirm Basket",(0,a.jsx)(m.Z,{className:"float-right text-3xl"})]})})]})}},313:function(t,e,r){r.r(e);var n=r(5893),c=r(5617);e.default=function(t){var e=t.data,r=void 0===e?0:e,a=(0,c.v9)((function(t){return t.settings})).settings;return(0,n.jsx)(n.Fragment,{children:a.price_type?(0,n.jsxs)(n.Fragment,{children:[a.price_icon,r.toLocaleString(void 0,{minimumFractionDigits:2})]}):(0,n.jsxs)(n.Fragment,{children:[r.toLocaleString(void 0,{minimumFractionDigits:2}),a.price_icon]})})}}}]);